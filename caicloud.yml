integration:

  services:
    mongo:
      image: mongo:3.0.5
      command: mongod
    
    mongo2:
      image: mongo:3.0.5
      command: mongod
    
    mongo3:
      image: mongo:3.0.5
      command: mongod
      
    mongo4:
      image: mongo:3.0.5
      command: mongod
      
    mongo5:
      image: mongo:3.0.5
      command: mongod
      
  image: golang:1.5.3
  env:
    - GOPATH=/go
  commands: 
    - ping -c 10 mongo

pre_build:
  image: golang:1.5.3
  volumes:
    - .:/go/src/mongo-client
  commands:
    - cd /go/src/mongo-client
    - go build -v .
  outputs:
    - /go/src/mongo-client/mongo-client

build:
  dockerfile_name: Dockerfile

deploy:
  - application: mongo-client
    cluster: b62ee1e0-c7b7-4931-af07-6c78edb97989
    partition: mongo
    containers:
    - mongo-client
